\subsubsection{Datenbank}
\paragraph{Library: Room}
Für die Haltung der Datenbank wird die \href{https://developer.android.com/training/data-storage/room}
{Room Library} benutzt. Diese bietet eine weitere Abstraktionsebene über SQLite.
Zu speichernde Objekte werden mithilfe von Datenklassen definiert.

\paragraph{Tabellen}
Es existieren folgende Tabellen:
\begin{itemize}
    \item buildings: Tabelle mit BuildingEntity-Elementen. Hierin sind alle Gebäude gespeichert.
    \item rooms: Tabelle mit RoomEntity-Elementen. Hierin sind alle Räume gespeichert.
    \item globalAliases: Tabelle mit AliasEntity-Elementen. Hierin sind die globalen Aliasse gespeichert.
    \item localAliases: Tabelle mit AliasEntity-Elementen. Hierin sind die lokalen Aliasse gespeichert.
    \item searchHistory: Tabelle mit SearchEntity-Elementen. Hierin werden alle erfolgreichen Suchen gespeichert. 
    Es ist immer nur die letzte Suche mit einem Suchbegriff gespeichert.
\end{itemize}

In der Datenbank gibt es folgende Datenklassen

\paragraph{BuildingEntity}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse enthält die Daten zu einem Gebäude.
\subparagraph*{Daten}
\begin{itemize}
    \item \texttt{mapId : int} MapId des Gebäudes. [Primärschlüssel]
    \item \texttt{pos : Position} Position auf der Karte.
    \item \texttt{name : String} Anzeigename des Gebäudes auf der Karte.
    \item \texttt{levelMin : int} Etagennummer der untersten Etage (-1 = 1.UG, 0 = EG, 1 = 1.OG).
    \item \texttt{levelMax : int} Etagennummer der obersten Etage.
    \item \texttt{address : String} Adresse des Gebäudes.
\end{itemize}

%---------------------------------------------------
\paragraph{RoomEntity}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse enthält die Daten zu einem Raum.
\begin{itemize}
    \item \texttt{mapId : int} MapId des Raumes. [Primärschlüssel]
    \item \texttt{pos : Position} Position auf der Karte.
    \item \texttt{name : String} Anzeigename des Raums auf der Karte.
    \item \texttt{mapId : int} MapId des Gebäudes in dem sich der Raum befindet.
    \item \texttt{level : int} Nummer der Etage, auf der sich der Raum befindet.
    \item \texttt{type : int} Typ des Raumes.
\end{itemize}

%---------------------------------------------------
\paragraph{Position}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse enthält die Daten für eine Position.
Es handelt sich hierbei um eine Datenklasse, die als \href{https://developer.android.com/reference/android/arch/persistence/room/Embedded}
{eingebettete Datenklasse} in andern Datenklassen verwendet werden kann. 
\subparagraph*{Daten}
\begin{itemize}
    \item \texttt{latitude : double} Breitengrad.
    \item \texttt{longitude : double} Längengrad.
\end{itemize}

%---------------------------------------------------
\paragraph{SearchEntity}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse enthält Einträge des Suchverlaufs.
\subparagraph*{Daten}
\begin{itemize}
    \item \texttt{searchTerm : String} Suchbegriff. [Primärschlüssel]
    \item \texttt{date : Date} Zeitpunkt der Suche.
\end{itemize}

%---------------------------------------------------
\paragraph{AliasEntity}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse speichert einen Alias.
\subparagraph*{Daten}
\begin{itemize}
    \item \texttt{term : String} Alternativer Bezeichner (Alias) für Kartenobjekt.
    \item \texttt{mapId : int} MapId des zugehörigen Kartenobjekts
\end{itemize}

%---------------------------------------------------
\paragraph{PersonEntity}
\subparagraph*{Typ}
Datenklasse.
\subparagraph*{Beschreibung}
Diese Datenklasse speichert die Daten einer Person.
\subparagraph*{Daten}
\begin{itemize}
    \item \texttt{title : String} Titel der Person.
    \item \texttt{firstName : String} Vorname.
    \item \texttt{lastName : String} Nachname.
    \item \texttt{mapId : int} MapId des Kartenobjekts, dem diese Person zugeordnet ist.
\end{itemize}